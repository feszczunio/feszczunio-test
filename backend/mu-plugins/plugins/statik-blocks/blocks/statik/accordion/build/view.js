var StatikAccordionBlock;!function(){"use strict";var e={d:function(t,i){for(var s in i)e.o(i,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:i[s]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t={};e.d(t,{default:function(){return s}});var i=window.lodash;function s(e){let{attributes:t}=e;document.addEventListener("DOMContentLoaded",(()=>{new r(document.querySelector(`.wp-block-${t.blockId}`),t).init()}))}class r{constructor(e,t){this.element=e,this.openOnlyOne=t.openOnlyOne,this.items=[...e.querySelectorAll(".wp-block-statik-accordion-item")].map((e=>new o(e,this)))}get openedItems(){return this.items.filter((e=>e.isOpen))}init(){this.setItemsHeight(),this.registerItemsEffects(),this.registerEffects()}registerItemsEffects(){this.items.forEach((e=>e.registerEffects()))}registerEffects(){new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting&&(this.refreshItemsHeight(),t.unobserve(e.target))}))}),{threshold:.5}).observe(this.element),window.addEventListener("resize",(0,i.debounce)((()=>{this.refreshItemsHeight()}),50))}refreshItemsHeight(){this.items.forEach((e=>e.recalculateHeight())),this.setItemsHeight()}setItemsHeight(){this.openedItems.forEach((e=>e.setHeight()))}closeItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.openedItems.forEach((t=>{e.includes(t)||t.close()}))}}class o{constructor(e,t){this.parent=t,this.element=e,this.header=e.querySelector(".wp-block-statik-accordion-item__header"),this.body=e.querySelector(".wp-block-statik-accordion-item__body"),this.bodyHeight=this.body.querySelector(".wp-block-statik-accordion-item__inner-blocks").offsetHeight}get isOpen(){return"true"===this.header.getAttribute("aria-expanded")}toggle(){this.element.classList.toggle("wp-block-statik-accordion-item--expanded"),this.isOpen?(this.body.style.height=null,this.header.setAttribute("aria-expanded","false")):(this.setHeight(),this.header.setAttribute("aria-expanded","true"))}recalculateHeight(){this.bodyHeight=this.body.querySelector(".wp-block-statik-accordion-item__inner-blocks").offsetHeight}setHeight(){this.body.style.height=this.bodyHeight+"px"}close(){this.header.setAttribute("aria-expanded",!1),this.element.classList.remove("wp-block-statik-accordion-item--expanded"),this.body.style.height=null}registerEffects(){this.header.addEventListener("click",(()=>{this.parent.openOnlyOne&&this.parent.closeItems([this]),this.toggle()})),this.header.addEventListener("keydown",(e=>{e.which.toString().match(/13|32/)&&(e.preventDefault(),this.toggle())})),this.body.addEventListener("transitionstart",(e=>{const{target:t,propertyName:i}=e;t===this.body&&"height"===i&&(this.body.style.overflow="hidden")})),this.body.addEventListener("transitionend",(e=>{const{target:t,propertyName:i}=e;t===this.body&&"height"===i&&(this.body.style.overflow=null)}))}}StatikAccordionBlock=t.default}();