var StatikTeamMemberCardsBlock;!function(){var t={70438:function(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n="NOPQRSTUVWXYZABCDEFGHIJKLMnopqrstuvwxyzabcdefghijklm".split(""),a=e.reduce(((t,e,a)=>Object.assign(t,{[e]:n[a]})),{});t.exports=t=>t.split("").map((t=>a[t]||t)).join("")}},e={};function n(a){var i=e[a];if(void 0!==i)return i.exports;var r=e[a]={exports:{}};return t[a](r,r.exports,n),r.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)};var a={};!function(){"use strict";n.d(a,{default:function(){return o}});var t=window.wp.apiFetch,e=n.n(t),i=window.statik.utils,r=n(70438),s=n.n(r);function o(t){let{attributes:e,currentPostId:n}=t;document.addEventListener("DOMContentLoaded",(async()=>{const t=new l(document.querySelector(`.wp-block-${e.blockId}`),e,n);await t.init()}))}class l{constructor(t,e,n){this.element=t,this.attributes=e,this.modalContainerElement=null,this.posts=null,this.followUpArea=this.attributes.followUpArea,this.followUpBehaviour=this.attributes.followUpBehaviour,this.readMoreButton=null,this.currentPostId=n}async init(){await this.renderPosts()}async fetchPosts(){let t=[];const n=this.attributes.query,a=n.exclude?[].concat(n.exclude):[];this.attributes.excludeCurrentPost&&a.push(this.currentPostId);const i={...n,exclude:a.length?a:""},r=new URLSearchParams(i).toString();try{t=await e()({path:`/wp/v2/people?_embed&${r}`})}catch(t){console.error("There was a problem with the fetch operation:",t)}return t}getPostTagName(){return"area"===this.followUpArea?"a":"div"}async renderPosts(){const t=await this.fetchPosts(),e=await Promise.all(t.map((async t=>await this.getPostHtml(t)))),n=this.getStyle(),a=document.createDocumentFragment();e.forEach(((e,n)=>{const i=t[n];a.appendChild(e),this.registerEffects(e,i)})),this.element.appendChild(a),this.element.appendChild(n)}async getPostHtml(t){const e=this.getPostTagName(),n=document.createElement(e);return n.setAttribute("class","wp-block-statik-team-member-cards__card"),"area"===this.followUpArea&&"redirect"===this.followUpBehaviour&&n.setAttribute("href",t.link),n.innerHTML=`\n\t\t\t${this.getPostImageHtml(t)}\t\t\n\t\t\t${this.getPersonNameHtml(t)}\n\t\t\t${this.getPostShortDescriptionHtml(t)}\n\t\t\t${this.getPostLongDescriptionHtml(t)}\n\t\t\t${this.getSocialMediaIconsHtml(t)}\n\t\t\t${this.getReadMoreButtonHtml(t)}\n\n\t\t`,n}getPersonNameHtml(t){return this.attributes.displayName?`<h3 class="wp-block-statik-team-member-cards__name">${t.title.rendered}</h3>`:""}getSrcsetAttribute(t){const e=[],n=Object.entries(t);for(const[,t]of n)e.push(`${t.source_url} ${t.width}w`);return e.join(", ")}getPostImageHtml(t){if(!this.attributes.displayImage)return"";const e=t?._embedded?.["wp:featuredmedia"];if(!e)return'\n\t\t\t\t<div class="wp-block-statik-team-member-cards__image--empty"></div>\n\t\t\t';const{source_url:n,title:a,media_details:i}=e[0];return`\n\t\t\t<div class="wp-block-statik-team-member-cards__image">\n\t\t\t\t<img srcset="${this.getSrcsetAttribute(i.sizes)}" \n\t\t\t\t\t src="${n}" \n\t\t\t\t\t alt="${a.rendered}"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t`}getPostShortDescriptionHtml(t){return this.attributes.displayShortDescription?`\n\t\t\t<div class="wp-block-statik-team-member-cards__long-desc">\n\t\t\t\t${t.acf.short_description}\n\t\t\t</div>\n\t\t`:""}getPostLongDescriptionHtml(t){return this.attributes.displayLongDescription?`\n\t\t\t<div class="wp-block-statik-team-member-cards__long-desc">\n\t\t\t\t${t.acf.long_description}\n\t\t\t</div>\n\t\t`:""}getSocialMediaIconsHtml(t){return this.attributes.displaySocialMedia?`\n\t\t<ul class="wp-block-statik-team-member-cards__social-media">\n\t\t${this.getMailLinkHtml(t)}\n\t\t${this.getLinkedinLinkHtml(t)}\n\t\t${this.getTwitterLinkHtml(t)}\n\t\t${this.getWebsiteLinkHtml(t)}\n\t\t</ul>\n\t\t`:""}getLinkedinLinkHtml(t){return 0===t.acf.contact_details.linkedin.length?"":`\n\t\t<li class="wp-block-statik-team-member-cards__linkedin">\n\t\t<a href=${t.acf.contact_details.linkedin} rel="noreferrer">\n    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32">\n\t    <path d="M29 0H3C1.35 0 0 1.35 0 3v26c0 1.65 1.35 3 3 3h26c1.65 0 3-1.35 3-3V3c0-1.65-1.35-3-3-3zM12 26H8V12h4v14zm-2-16c-1.106 0-2-.894-2-2s.894-2 2-2c1.106 0 2 .894 2 2s-.894 2-2 2zm16 16h-4v-8c0-1.106-.894-2-2-2s-2 .894-2 2v8h-4V12h4v2.481C18.825 13.35 20.087 12 21.5 12c2.488 0 4.5 2.238 4.5 5v9z" />\n    </svg>\n</a>\n\t \t </li>\n\t\t`}getMailLinkHtml(t){return 0===t.acf.contact_details.email.length?"":`\n\t\t  <li class="wp-block-statik-team-member-cards__email">\n\t\t\t<a href="mailto:${s()(t.acf.contact_details.email)}" rel="noreferrer">\n    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 28">\n\t\t\t<path d="M15.188 12.109c0-2.25-1.172-3.594-3.141-3.594-2.594 0-5.375 2.578-5.375 6.75 0 2.328 1.156 3.656 3.187 3.656 3.141 0 5.328-3.594 5.328-6.813zM24 14c0 4.859-3.469 6.687-6.438 6.781-0.203 0-0.281 0.016-0.5 0.016-0.969 0-1.734-0.281-2.219-0.828-0.297-0.344-0.469-0.781-0.516-1.297-0.969 1.219-2.656 2.406-4.766 2.406-3.359 0-5.281-2.078-5.281-5.703 0-4.984 3.453-9.031 7.672-9.031 1.828 0 3.297 0.781 4.078 2.109l0.031-0.297 0.172-0.875c0.016-0.125 0.125-0.281 0.234-0.281h1.844c0.078 0 0.156 0.109 0.203 0.172 0.047 0.047 0.063 0.172 0.047 0.25l-1.875 9.594c-0.063 0.297-0.078 0.531-0.078 0.75 0 0.844 0.25 1.016 0.891 1.016 1.062-0.031 4.5-0.469 4.5-4.781 0-6.078-3.922-10-10-10-5.516 0-10 4.484-10 10s4.484 10 10 10c2.297 0 4.547-0.797 6.328-2.25 0.219-0.187 0.531-0.156 0.703 0.063l0.641 0.766c0.078 0.109 0.125 0.234 0.109 0.375-0.016 0.125-0.078 0.25-0.187 0.344-2.125 1.734-4.828 2.703-7.594 2.703-6.609 0-12-5.391-12-12s5.391-12 12-12c7.172 0 12 4.828 12 12z"></path>\n\t\t</svg>\n</a>\n\t\t  </li>\n\t\t`}getWebsiteLinkHtml(t){return 0===t.acf.contact_details.website.length?"":`\n\t\t  <li class="wp-block-statik-team-member-cards__website">\n\t\t\t<a href="${t.acf.contact_details.website}" target="_blank" rel="noreferrer">\n    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32">\n      <path d="M16 0C7.163 0 0 7.163 0 16s7.163 16 16 16 16-7.163 16-16S24.837 0 16 0zm0 30c-1.967 0-3.84-.407-5.538-1.139l7.286-8.197a.998.998 0 0 0 .253-.664v-3a1 1 0 0 0-1-1c-3.531 0-7.256-3.671-7.293-3.707A1 1 0 0 0 9.001 12h-4a1 1 0 0 0-1 1v6c0 .379.214.725.553.894l3.447 1.724v5.871c-3.627-2.53-6-6.732-6-11.489 0-2.147.484-4.181 1.348-6h3.652c.265 0 .52-.105.707-.293l4-4A1 1 0 0 0 12.001 5V2.581a14.013 14.013 0 0 1 4-.581c2.2 0 4.281.508 6.134 1.412A5.961 5.961 0 0 0 20.002 8c0 1.603.624 3.109 1.757 4.243a5.985 5.985 0 0 0 4.536 1.751c.432 1.619 1.211 5.833-.263 11.635a.936.936 0 0 0-.026.163A13.956 13.956 0 0 1 16.002 30z" />\n    </svg></a>\n\t\t  </li>\n\t\t`}getTwitterLinkHtml(t){return 0===t.acf.contact_details.twitter.length?"":`\n\t\t  <li class="wp-block-statik-team-member-cards__twitter">\n\t\t\t<a href="${t.acf.contact_details.twitter}" target="_blank" rel="noreferrer">\n    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32">\n     <path d="M32 7.075a12.941 12.941 0 0 1-3.769 1.031 6.601 6.601 0 0 0 2.887-3.631 13.21 13.21 0 0 1-4.169 1.594A6.565 6.565 0 0 0 22.155 4a6.563 6.563 0 0 0-6.563 6.563c0 .512.056 1.012.169 1.494A18.635 18.635 0 0 1 2.23 5.195a6.56 6.56 0 0 0-.887 3.3 6.557 6.557 0 0 0 2.919 5.463 6.565 6.565 0 0 1-2.975-.819v.081a6.565 6.565 0 0 0 5.269 6.437 6.574 6.574 0 0 1-2.968.112 6.588 6.588 0 0 0 6.131 4.563 13.17 13.17 0 0 1-9.725 2.719 18.568 18.568 0 0 0 10.069 2.95c12.075 0 18.681-10.006 18.681-18.681 0-.287-.006-.569-.019-.85A13.216 13.216 0 0 0 32 7.076z" />\n</svg>\n    </a>\n\t\t  </li>\n\t\t`}getReadMoreButtonHtml(t){return this.attributes.displayReadMoreButton?"none"===this.followUpArea||"area"===this.followUpArea?'\n\t\t\t\t<div class="wp-block-statik-team-member-cards__read-more" >\n\t\t\t\t\tRead More\n\t\t\t\t</div>\n\t\t\t':`\n\t\t<a class="wp-block-statik-team-member-cards__read-more" href="${t.link}">\n\t\t\tRead More\n\t\t</a>\n\t\t`:""}registerEffects(t,e){if("redirect"===this.followUpBehaviour)return null;let n=null;return"area"===this.followUpArea&&"modal"===this.followUpBehaviour&&(n=t),"button"===this.followUpArea&&"modal"===this.followUpBehaviour&&(n=t.querySelector(".wp-block-statik-team-member-cards__read-more")),n&&n.addEventListener("click",(async t=>{t.preventDefault(),await this.appendModal(e),this.openModal(e)})),n}async appendModal(t){if(this.modalContainerElement)return;const e=await this.getModalHtml(t),n=document.createElement("template");n.innerHTML=e.trim(),this.modalContainerElement=n.content.firstChild,document.body.appendChild(this.modalContainerElement)}openModal(t){const e=this.getModalConfig();i.MicroModal.show(`modal-team-member-${t.id}`,e)}destroyModal(){this.modalContainerElement&&(this.modalContainerElement.remove(),this.modalContainerElement=null)}getWebsiteModalHtml(t){return`\n\t\t<div class="wp-block-statik-team-member-cards__content-modal">\n\t\t\t<iframe src="${t.link}" />\n\t\t</div>\n\t\t`}getContentModalHtml(t){return`\n\t\t<div class="wp-block-statik-team-member-cards__content-modal">\n\t\t\t${t.content.rendered}\n\t\t</div>\n\t\t`}async getModalHtml(t){const e=this.attributes.modalContent;let n=null;return"website"===e&&(n=this.getWebsiteModalHtml(t)),"content"===e&&(n=this.getContentModalHtml(t)),`\n\t\t<div id="modal-team-member-${t.id}" class="modal micromodal-slide " aria-hidden="true">\n\t\t\t<div class="modal__overlay">\n\t\t\t\t<div class="modal__content wp-block-statik-team-member-cards__modal"> \n\t\t\t\t\t<button class="modal__close" aria-label="Close modal" data-micromodal-close></button> \n\t\t\t\t\t${n}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t`}getModalConfig(){return{disableScroll:!0,awaitCloseAnimation:!0,onClose:t=>{const e=this;t.addEventListener("animationend",(function n(){e.destroyModal(),t.removeEventListener("animationend",n,!1)}),!1)}}}getStyle(){const t=(0,i.rwdAttribute)(this.attributes.cardsPerRow),e=document.createElement("style");return e.innerHTML=`\n\t\t.wp-block-${this.attributes.blockId} {\n\t\t\t--wp-block-statik-team-member-cards--attr--cardsPerRow: ${t.inherit.mobile};\n\t\t}\n\t\t@media (min-width: 991px) {\n\t\t  .wp-block-${this.attributes.blockId} {\n\t\t\t--wp-block-statik-team-member-cards--attr--cardsPerRow: ${t.inherit.tablet};\n\t\t  }\n\t\t}\n\t\t@media (min-width: 1200px) {\n\t\t  .wp-block-${this.attributes.blockId} {\n\t\t\t--wp-block-statik-team-member-cards--attr--cardsPerRow: ${t.inherit.desktop};\n\t\t  }\n\t\t}\n\t\t`,e}}}(),StatikTeamMemberCardsBlock=a.default}();