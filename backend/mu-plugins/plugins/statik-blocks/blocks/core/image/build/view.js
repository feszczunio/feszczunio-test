var CoreImageBlock;!function(){"use strict";var e=window.wp.interactivity;const t=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'];let i,o=!1,n=0;function a(e){!o&&Date.now()-n>450&&window.scrollTo(e.core.image.scrollLeftReset,e.core.image.scrollTopReset)}function l(e,t){let{naturalWidth:i,naturalHeight:o,offsetWidth:n,offsetHeight:a}=t,{x:l,y:r}=t.getBoundingClientRect();const c=i/o;let g=n/a;if("contain"===e.core.image.scaleAttr)if(c>g){const e=n/c;r+=(a-e)/2,a=e}else{const e=a*c;l+=(n-e)/2,n=e}g=n/a;let d=parseFloat("none"!==e.core.image.targetWidth?e.core.image.targetWidth:i),m=parseFloat("none"!==e.core.image.targetHeight?e.core.image.targetHeight:o),s=d/m,h=d,u=m,w=d,f=m;if(c.toFixed(2)!==s.toFixed(2)){if(c>s){const e=d/c;m-e>d?(m=e,d=e*c):m=d/c}else{const e=m*c;d-e>m?(d=e,m=e/c):d=m*c}w=d,f=m,s=d/m,g>s?(h=d,u=h/g):(u=m,h=u*g)}(n>w||a>f)&&(w=n,f=a);let b=0;window.innerWidth>480?b=80:window.innerWidth>1920&&(b=160);const x=Math.min(window.innerWidth-b,w),p=Math.min(window.innerHeight-80,f);g>x/p?(w=x,f=w/g):(f=p,w=f*g);const E=n/w,y=d*(w/h),v=m*(f/u);let A=document.getElementById("wp-lightbox-styles");A||(A=document.createElement("style"),A.id="wp-lightbox-styles",document.head.appendChild(A)),A.innerHTML=`\n\t\t:root {\n\t\t\t--wp--lightbox-initial-top-position: ${r}px;\n\t\t\t--wp--lightbox-initial-left-position: ${l}px;\n\t\t\t--wp--lightbox-container-width: ${w+1}px;\n\t\t\t--wp--lightbox-container-height: ${f+1}px;\n\t\t\t--wp--lightbox-image-width: ${y}px;\n\t\t\t--wp--lightbox-image-height: ${v}px;\n\t\t\t--wp--lightbox-scale: ${E};\n\t\t\t--wp--lightbox-scrollbar-width: ${window.innerWidth-document.documentElement.clientWidth}px;\n\t\t}\n\t`}(0,e.store)({state:{core:{image:{windowWidth:window.innerWidth,windowHeight:window.innerHeight}}},actions:{core:{image:{showLightbox:e=>{let{context:t,event:o}=e;t.core.image.imageLoaded&&(t.core.image.initialized=!0,t.core.image.lastFocusedElement=window.document.activeElement,t.core.image.scrollDelta=0,t.core.image.pointerType=o.pointerType,t.core.image.lightboxEnabled=!0,l(t,t.core.image.imageRef),t.core.image.scrollTopReset=window.pageYOffset||document.documentElement.scrollTop,t.core.image.scrollLeftReset=window.pageXOffset||document.documentElement.scrollLeft,i=a.bind(null,t),window.addEventListener("scroll",i,!1))},hideLightbox:async e=>{let{context:t}=e;t.core.image.hideAnimationEnabled=!0,t.core.image.lightboxEnabled&&(setTimeout((function(){window.removeEventListener("scroll",i),t.core.image.lightboxTriggerRef.focus({preventScroll:!0})}),450),t.core.image.lightboxEnabled=!1)},handleKeydown:e=>{let{context:t,actions:i,event:o}=e;t.core.image.lightboxEnabled&&("Tab"!==o.key&&9!==o.keyCode||(o.shiftKey&&window.document.activeElement===t.core.image.firstFocusableElement?(o.preventDefault(),t.core.image.lastFocusableElement.focus()):o.shiftKey||window.document.activeElement!==t.core.image.lastFocusableElement||(o.preventDefault(),t.core.image.firstFocusableElement.focus())),"Escape"!==o.key&&27!==o.keyCode||i.core.image.hideLightbox({context:t,event:o}))},handleLoad:e=>{let{context:t,effects:i,ref:o}=e;t.core.image.imageLoaded=!0,t.core.image.imageCurrentSrc=o.currentSrc,i.core.image.setButtonStyles({context:t,ref:o})},handleTouchStart:()=>{o=!0},handleTouchMove:e=>{let{context:t,event:i}=e;t.core.image.lightboxEnabled&&i.preventDefault()},handleTouchEnd:()=>{n=Date.now(),o=!1}}}},selectors:{core:{image:{roleAttribute:e=>{let{context:t}=e;return t.core.image.lightboxEnabled?"dialog":null},ariaModal:e=>{let{context:t}=e;return t.core.image.lightboxEnabled?"true":null},dialogLabel:e=>{let{context:t}=e;return t.core.image.lightboxEnabled?t.core.image.dialogLabel:null},lightboxObjectFit:e=>{let{context:t}=e;if(t.core.image.initialized)return"cover"},enlargedImgSrc:e=>{let{context:t}=e;return t.core.image.initialized?t.core.image.imageUploadedSrc:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="}}}},effects:{core:{image:{initOriginImage:e=>{let{context:t,ref:i}=e;t.core.image.imageRef=i,t.core.image.lightboxTriggerRef=i.parentElement.querySelector(".lightbox-trigger"),i.complete&&(t.core.image.imageLoaded=!0,t.core.image.imageCurrentSrc=i.currentSrc)},initLightbox:async e=>{let{context:i,ref:o}=e;if(i.core.image.lightboxEnabled){const e=o.querySelectorAll(t);i.core.image.firstFocusableElement=e[0],i.core.image.lastFocusableElement=e[e.length-1],o.focus()}},setButtonStyles:e=>{let{context:t,ref:i}=e;const{naturalWidth:o,naturalHeight:n,offsetWidth:a,offsetHeight:l}=i;if(0===o||0===n)return;const r=i.parentElement,c=i.parentElement.clientWidth;let g=i.parentElement.clientHeight;const d=r.querySelector("figcaption");if(d){const e=window.getComputedStyle(d);["absolute","fixed"].includes(e.position)||(g=g-d.offsetHeight-parseFloat(e.marginTop)-parseFloat(e.marginBottom))}const m=g-l,s=c-a;if("contain"===t.core.image.scaleAttr){const e=o/n;if(e>=a/l){const i=a/e;t.core.image.imageButtonTop=(l-i)/2+m+16,t.core.image.imageButtonRight=s+16}else{const i=l*e;t.core.image.imageButtonTop=m+16,t.core.image.imageButtonRight=(a-i)/2+s+16}}else t.core.image.imageButtonTop=m+16,t.core.image.imageButtonRight=s+16},setStylesOnResize:e=>{let{state:t,context:i,ref:o}=e;i.core.image.lightboxEnabled&&(t.core.image.windowWidth||t.core.image.windowHeight)&&l(i,o)}}}}},{afterLoad:e=>{let{state:t}=e;window.addEventListener("resize",function(e){let t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return()=>{clearTimeout(t),t=setTimeout((()=>{t=null,e()}),i)}}((()=>{t.core.image.windowWidth=window.innerWidth,t.core.image.windowHeight=window.innerHeight})))}}),CoreImageBlock={}.default}();